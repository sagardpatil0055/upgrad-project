- name: Install Docker on app and jenkins
  hosts: _app,_jenkins
  become: yes
  roles:
    - role: ansible-role-docker

- name: Install Java 
  hosts: _jenkins
  become: yes
  tasks:
    - name: Update APT cache
      apt:
        update_cache: yes

    - name: Install OpenJDK 21
      apt:
        name: openjdk-21-jdk
        state: present


- name: Install jenkins on jenkins
  hosts: _jenkins
  become: yes
  roles:
    - role: ansible-role-jenkins

    - name: Restart Jenkins service
      service:
        name: jenkins
        state: restarted
